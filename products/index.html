<html>

    <head>
    </head>

<body id="main-elem">
  <div id="content">
  <!--<div class="btn-group" role="group" aria-label="...">
  <button type="button" class="btn btn-default" onclick="product.sort('desc')">Desc</button>
  <button type="button" class="btn btn-default" onclick="product.sort()">Asc</button>
</div>-->

<div class="btn-group" role="group" aria-label="...">
    <div class="btn-group" role="group">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      {{sortOption}}
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <button type="button" class="btn btn-default" @click="sortOption='p_price'">Price</button>
      <button type="button" class="btn btn-default" @click="sortOption='product_id'">Id</button>
      <!--<button type="button" class="btn btn-default">Type</button>-->
    </ul>
  </div>
  <button type="button" class="btn btn-default" onclick="product.sort('desc')">Desc</button>
  <button type="button" class="btn btn-default" onclick="product.sort()">Asc</button>
</div>

<template id="product-template">
  <div>
    <ul class="list-group" style="width:500px">
      <li class="list-group-item"><b>Product ID:</b> {{id}}</li>
      <li class="list-group-item"><b>Product Name:</b> {{name}}</li>
      <li class="list-group-item"><b>Product Description:</b> {{description}}</li>
      <li class="list-group-item"><b>Product Price:</b> â‚¬{{price}}</li>
    </ul>
  </div>
</template>

<product-list v-for="val in values" :id="val.product_id" :name="val.p_name" :description="val.p_description" :price="val.p_price">
  </product-list>
</div>
</body>
</html>
<script src="../includes/master/master.js"></script>
<script>
$(document).ready(function() {
      document.title += 'products';
});

var local = 'http://localhost:8080/products';
var live  = 'http://95.85.32.165:8080/users';

Vue.component('product-list',
{
  props: ['id', 'name', 'description', 'price'],
  template: '#product-template'
});

var product = new Vue({
  el: '#main-elem',
  data : {
    values : [],
    sortOption : "product_id"
  },
  methods: {
    fetchData: function () {
      var xhr = new XMLHttpRequest()
      var self = this
      xhr.open('GET', local)
      xhr.onload = function () {
        self.values = JSON.parse(xhr.responseText)
      }
      xhr.send()
    },

    sort: function(sort)
    {
      var self = this;
      this.values = this.values.sort(function(a, b)
      {
        if(sort === 'desc')
        {
          console.log(self.sortOption);
          return b[self.sortOption] - a[self.sortOption];
        }
        else
        {
          return a[self.sortOption] - b[self.sortOption];
        }
      });
    }
  }
})

product.fetchData();
</script>
